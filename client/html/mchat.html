<head>

</head>
<body>
	{{#if currentUser}}
		{{> Menubar}}
		{{> MasterChat}}
	{{else}}
		{{> loginButtons}}
	{{/if}}
</body>
<template name='MasterChat'>
		{{#each joined_rooms}}
			{{> Room}}
		{{/each}}	
</template>

<template name='Room'>
	<div class='room {{active}}' id='{{name}}'>
		{{> Chat}}
		{{> RoomUsers}}
	</div>
</template>

<template name='RoomUsers'>
	<div class='room_users'>	
		{{#each users}}
			{{>RoomUser}}
		{{/each}}
	</div>
</template>

<template name='RoomUser'>
	<div class='user'>
		{{name}}
	</div>
</template>

<template name='Chat'>
	<div class='chat'>
		{{ #each chat_lines }}
			{{> ChatLine}}
		{{ /each }}
	</div>
	<input type='text' class='new_chat'>
</template>

<template name='ChatLine'>
	<div class='line'>
		<div class='timestamp'>
			{{time date}}
		</div>
		<div class='name'>
			{{user}}
		</div>
		<div class='text'>
			{{text}}
		</div>
	</div>	
</template>	

<template name="Menubar">
	<div id='menubar' class='expanded'>
		{{> Logout}}
		<div id='menubar_roomlist'>
			{{#each rooms}}
				{{> ActiveRoomButton}}
			{{/each}}
		</div>
		
	</div>
</template>

<template name='ActiveRoomButton'>
	<div class='textbutton'>
		{{name}}
	</div>
</template>

<template name='Logout'>
	<div class='textbutton'>logout</div>
</template>